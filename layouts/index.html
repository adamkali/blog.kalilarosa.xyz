{{ define "main" }}
{{ $title := print .Site.Title " | " .Title}}
{{ if .IsHome }}{{ $title = .Site.Title }}{{ end }}
<div class="flex flex-col items-center min-h-screen">
	{{ partial "menu.html" (dict "menuID" "main" "page" .) }}

	<!-- Home page content - 2/3 width -->
	<div class="w-2/3 max-w-4xl space-y-6 mt-8">
		<div class="text-center mb-8">
			<h1 class="text-glow-primary text-2xl font-bold mb-4">{{ $title }}</h1>
		</div>
		<div class="flex flex-col items-center text-center mb-8">

			{{ if isset .Params "lead" }}
			<p class="text-glow-quartary italic text-lg">{{ .Params.lead }}</p>
			{{ end }}
			<!-- Portrait and Lead content side by side -->
			<div class="flex flex-row md:flex-row items-stretch gap-8">
				<!-- Portrait -->
				<div class="flex-1">
					<div class="portrait-container h-full flex items-center justify-center">
						<!-- Multiple format support with HEIC fallback -->
						<picture class="h-80 w-80">
							<source srcset="/me.jpeg" type="image/jpeg">
							<img src="/me.jpeg" alt="Portrait of {{ .Site.Params.name }}"
								class="cyberpunk-portrait w-full h-full object-cover">
						</picture>
					</div>
				</div>

				<!-- Lead and Content -->
				<div class="w-2/3 flex flex-col space-y-6">
					<div class="blog-card p-6 text-justify">
						{{ .Content }}
					</div>
				</div>
			</div>

		</div>

		<!-- Most Recent Post -->
		{{ with (where site.RegularPages "Type" "posts" | first 1) }}
		{{ range . }}
		<div class="mt-8">
			<h2 class="text-glow-secondary text-xl font-semibold mb-4 text-center">Latest Post</h2>
			<a href="{{ .RelPermalink }}" class="blog-card block p-6 space-y-4 float-effect">
				<div class="text-center">
					<h3 class="text-glow-primary font-bold text-lg mb-2">{{ .LinkTitle }}</h3>
					{{ $dateMachine := .Date | time.Format "2006-01-02T15:04:05-07:00" }}
					{{ $dateHuman := .Date | time.Format ":date_long" }}
					<time class="text-glow-tertiary text-sm" datetime="{{ $dateMachine }}">{{ $dateHuman }}</time>
				</div>
				{{ if .Summary }}
				<p class="text-justify mt-4">{{ .Summary }}</p>
				{{ end }}
				<div class="flex flex-wrap justify-center gap-2 mt-4">
					{{ range .Params.categories }}
					<span class="rounded-full italic text-xs px-2 py-1 transition-all duration-200"
						style="background: linear-gradient(135deg, #fa34a1, #fc65b8); color: #0e102d; box-shadow: 0 0 10px rgba(250, 52, 161, 0.3);">#
						{{ . }}</span>
					{{ end }}
				</div>
				<div class="text-center mt-4">
					<span class="text-glow-secondary text-sm">Read more â†’</span>
				</div>
			</a>
		</div>
		{{ end }}
		{{ end }}
	</div>
</div>
{{ end }}
