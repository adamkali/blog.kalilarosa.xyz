<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://blog.kalilarosa.xyz/favicon.ico><link rel=preload href=/fonts/VictorMonoNerdFontPropo-Regular.ttf as=font type=font/ttf crossorigin><link rel=preload href=/fonts/VictorMonoNerdFont-Regular.ttf as=font type=font/ttf crossorigin><link rel=stylesheet href=/fonts/victor-mono-nerd-font.css><title>Yet another trashy dev blog | Introducing Egg.</title>

  
    
    
      
        
          <link rel="preload" href="/css/main.min.9bbd477ae7141ac906d70fa1a6d5505c95f5e54fe360b4b19d61527e47672cff.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
          <noscript><link rel="stylesheet" href="/css/main.min.9bbd477ae7141ac906d70fa1a6d5505c95f5e54fe360b4b19d61527e47672cff.css" integrity="sha256-m71HeucUGskG1w&#43;hptVQXJX15U/jYLSxnWFSfkdnLP8=" crossorigin="anonymous"></noscript>
        
      
    
  
</head><body class="min-h-screen text-lg relative"><main><div class="flex flex-col items-center min-h-screen"><nav aria-label=breadcrumb class="glass-nav w-3/5 mx-auto mt-6 pt-4 flex flex-row h-12 divide-slate-200 text-lg font-semibold text-center justify-evenly mb-8"><ol class="space-x-4 flex flex-row"><li class="duration-150 transform align-middle"><a href=/ class="hover:text-glow-secondary transition transform duration-200 ease-in-out" style="border-bottom:2px solid #8da0b8" onmouseover='this.style.borderBottomColor="#fa34a1"' onmouseout='this.style.borderBottomColor="#8da0b8"'>Home</a></li><li class="duration-150 transform align-middle"><a href=/posts class="text-glow-quartary transition transform duration-200 ease-in-out" style="border-bottom:2px solid #fc853f">Posts</a></li><li class="duration-150 transform align-middle"><a href=/configs class="hover:text-glow-secondary transition transform duration-200 ease-in-out" style="border-bottom:2px solid #8da0b8" onmouseover='this.style.borderBottomColor="#fa34a1"' onmouseout='this.style.borderBottomColor="#8da0b8"'>Configs</a></li><li class="duration-150 transform align-middle"><a href=/about class="hover:text-glow-secondary transition transform duration-200 ease-in-out" style="border-bottom:2px solid #8da0b8" onmouseover='this.style.borderBottomColor="#fa34a1"' onmouseout='this.style.borderBottomColor="#8da0b8"'>About</a></li><li class="duration-150 transform align-middle"><a href=https://github.com/adamkali class="hover:text-glow-secondary transition transform duration-200 ease-in-out" style="border-bottom:2px solid #8da0b8" onmouseover='this.style.borderBottomColor="#fa34a1"' onmouseout='this.style.borderBottomColor="#8da0b8"' target=_blank rel="noopener noreferrer">Github</a></li><li class="duration-150 transform align-middle"><a href=www.linkedin.com/in/adam-kalinowski-a8209a1b1 class="hover:text-glow-secondary transition transform duration-200 ease-in-out" style="border-bottom:2px solid #8da0b8" onmouseover='this.style.borderBottomColor="#fa34a1"' onmouseout='this.style.borderBottomColor="#8da0b8"'>Linkedin</a></li><li class="duration-150 transform align-middle"><a href=/index.xml class="hover:text-glow-secondary transition transform duration-200 ease-in-out" style="border-bottom:2px solid #8da0b8" onmouseover='this.style.borderBottomColor="#fa34a1"' onmouseout='this.style.borderBottomColor="#8da0b8"'>üì° RSS</a></li></ol></nav><div class="w-2/3 max-w-4xl space-y-8 mt-8"><header class=w-full><h1 class="text-center mb-6">Introducing Egg.</h1><i class="nf nf-fa-clock_0"></i><div aria-label=breadcrumb class="glass-nav w-full mx-auto mt-6 pt-4 flex flex-row h-12 divide-slate-200 text-lg font-semibold text-center justify-evenly mb-8"><ol class="space-x-4 flex flex-row"><li><b class="text-glow-primary font-bold">Created:</b>&nbsp;<time datetime=2025-05-05T10:14:54-05:00>May 5, 2025</time></li><li><b class="text-glow-primary font-bold">Updated:</b>&nbsp;<time datetime=2025-09-12T16:32:16-05:00>September 12, 2025</time></li><li><b class="text-glow-primary font-bold">Reading Time:</b>&nbsp;26 minutes</li></ol></div></header><article class="blog-card space-y-4 text-justify mb-8 p-8"><h1 id=because-i-can>Because I can.</h1><p>Everyone always tells you &ldquo;don&rsquo;t reinvent the wheel.&rdquo; Use existing frameworks. Don&rsquo;t waste time building what already exists. And they&rsquo;re probably right‚Äîfor most people, most of the time. You aren&rsquo;t going to do it any better than x engineers.</p><p>But sometimes you need to prove to yourself (and any future potential employers) that you can actually build the wheel. Sometimes the best way to understand production-ready software is to build it yourself, exactly the way you want it to work. Sometimes problem-solving IS the point.</p><p>One day, I was doom-scrolling on YouTube and came across a video on deploying to a VPS without Netlify or Vercel, by the one: <a href="https://www.youtube.com/watch?v=F-9KWQByeU0&amp;t=10s">Dreams of Code</a>. And like any good developer with a chronic case of &ldquo;I bet I could build that,&rdquo; I wanted to copy the project and try the &ldquo;tutorial&rdquo; for myself and deploy a service to my newly installed homelab. But more importantly, I saw an opportunity to solve my real problem: I wasn&rsquo;t shipping enough projects.
At this time, I was trying out <a href=https://github.com/loco-rs/loco>Loco-rs</a> and fell in love with the cool features it offered that I genuinely cared about.
So, if I was going to create a service using the Loco framework, I wanted to make it as simple as possible.
Or, more accurately: to be as simple as Vercel or Netlify.
So I laid out a few requirements that I felt, if not satisfied, would be a dealbreaker.</p><h2 id=requirementstxt>Requirements.txt</h2><ol><li>I wanted to stop bootstrapping the same project structure over and over. You know that feeling when you have a brilliant project idea at 11 PM, but you remember you&rsquo;ll need to spend 3 hours setting up Docker, configuring the database, and getting auth working? Database, cache, object storage, and Auth needs to be set up from the start</li><li>I wanted the Ruby on Rails experience but in a language I already knew and could iterate on quickly. The <strong>opinions</strong>. The &ldquo;this is how we do things&rdquo; structure that lets you jump straight to business logic. So lets focus on having rock solid opinions. (Foreshadowing)</li><li>I wanted to deploy by pushing to main. The Vercel experience: commit, push, see your changes live. But on my homelab, because I have this perfectly good server sitting there and I want to actually use it for development and prototyping.</li><li>I wanted all deployments automated with CI/CD, because manually deploying things in 2025 is just embarrassing.</li><li>I want my stack to be deployed locally. If I have to end up storing this off location. Fine. I need to be able to integrat on hardware that I own.
I don&rsquo;t want to build the plane while I&rsquo;m flying it. I want the plane already built from the factory. The factory that I made myself, on the land that I built.</li></ol><p>With all of this in mind, I started using Loco to first make sure that I could deploy a Loco-rs application to my server using the same pattern that [Dreams of Code] did in their video.
I started by creating a new Loco-rs project and setting up the database (Postgres), cache (Redis), and S3 (MinIO) through docker-compose.
I then used that docker-compose file to deploy these services to my home server and verify that everything was reachable from outside the network.
And they were! Great so far&mldr;
Now that I tested everything was working separately, I decided to create a docker-swarm.yaml to get the resilience that was talked about in the video.
I was sure that there would be nothing an operating system container would do to make my Docker environment unable to use Docker Swarm, right?</p><h2 id=suprise-canonical-wants-to-chat>Suprise! Canonical wants to chat</h2><p>When I was setting up my server for homelab deployment, I just added the Docker package during the installation of Ubuntu 24.04 Server OS. Seemed reasonable, right? Wrong.</p><p>Turns out using Docker Swarm on the Snap version of Docker is like trying to write to a read-only filesystem&mldr; because that&rsquo;s literally what happens. The Snap sandboxing makes <code>swarm mode</code> throw <a href=https://forum.snapcraft.io/t/docker-docker-compose-in-swarm-mode-give-ro-filesystem/11561>ro filesystem errors</a>, and even when you work around those, the containers couldn&rsquo;t discover each other on the Docker network in my case. The Loco server couldn&rsquo;t talk to Postgres, Postgres couldn&rsquo;t talk to Redis, nothing worked.</p><p>Eventually (an entire weekend), I realized I was focusing on the wrong problem entirely. I wanted to build software, not spend weekends debugging containerization. So I nuked the Snap Docker, installed Docker properly, and gave up on Swarm altogether. Sometimes the best solution is admitting you were overengineering from the start.</p><p>Reinventing the wheel is fine, but over-engineering the axle before getting the wheel started is kind of nuts. Luckily, I wasn&rsquo;t giving up on creating my personal development stack .</p><h2 id=coolify>Coolify</h2><p>After icing the Docker Swarm idea, as someone in the 99th percentile of having Neanderthal DNA, I can be sure that the feeling of discovering fire was similar to discovering Coolify. I didn&rsquo;t want to spend another weekend debugging infrastructure. I wanted to get a framework up and running in one night and be able to iterate that same night. Back to Google I went, this time searching for &ldquo;self-hosted Vercel&rdquo; because apparently I&rsquo;m a glutton for punishment.</p><p>That&rsquo;s when I discovered <a href=https://coolify.io/>Coolify</a>, and it seemed like a match made in heaven. Here was a tool that promised the Vercel experience but on my own hardware. I dove into the documentation and found everything I didn&rsquo;t know I needed: a REST API to control deployments, preview deployments for different branches, and their magic DNS tool that handled all the subdomain routing I would have otherwise fought with nginx for hours to configure.</p><p>But the real kicker? It embodied the spirit of free as in libre. Complete control over my deployments, the ability to dictate environments, and I could swap out services with a simple click. No vendor lock-in, no usage limits, just my server doing exactly what I wanted it to do.</p><p>This solved multiple problems at once: the CI/CD pipeline I needed, the one-click deployment experience I craved, and it let me focus on building the actual framework instead of fighting with container orchestration. Perfect. Now to test if my bet with Loco-rs would pay off.</p><h2 id=lets-get-rusty>Let&rsquo;s get Rusty</h2><p>It did not. Look, I have massive respect for what Rust does and the problems it solves. But my grug brain wanted to write more code, not smarter code. I wanted to jam out features, not spend hours satisfying the borrow checker for simple changes.
After about a month of giving Loco-rs a good college try, I found that I was hitting a roadblock every time I opened Neovim. Not because I had no motivation or didn&rsquo;t understand the language. Development velocity in Rust felt like trying to improvise jazz. Specifically for anyone who read the Silmarillion, I was Eru Iluvatar, while rust and the borrow checker was Melkor standing in the back playing death metal at -9000 dB.
The adage &ldquo;You fight the borrow checker, not the compiler&rdquo; really is true. I could implement traits for data transformation just fine. The problem came whenever I wanted to make simple changes‚Äîchange a model field, update a response type, or any sort of editing of buisness logic required satisfying lifetimes and ownership three levels deep up the call stack up the call stack up the call stack.
Want to change a <code>String</code> field to <code>&amp;str</code>? Sure, seems simple enough. But that innocent change cascades into 40 compiler errors because now you need lifetimes, and those lifetimes need to satisfy Sync + Send traits somewhere up the framework chain. What should be a 30-second change becomes an hour-long archaeological dig through the type system.
And the real kicker? You don&rsquo;t find out until after the compile finishes. For my use case, that was the final nail in the coffin. I timed it against my company&rsquo;s production Create React App build to see what I was subjecting myself to:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Rust clean builds: <span class=m>71</span> seconds
</span></span><span class=line><span class=cl>eFileMadeEasy<span class=err>&#39;</span>s Create React App: <span class=m>58</span> seconds
</span></span></code></pre></div><p>Building became such a knee cap that if I did not swallow my pride and weigh the pros and cons of using a different language, I would not only be adding the mental cost of implementing everything in rust.
I would also be taking the mental overhead of always needing to add the extra 10 seconds locally to every build.
When you add CI/CD into the mix‚Äîpushing changes to GitHub, waiting for Docker builds, discovering you set the server to <code>localhost</code> instead of <code>0.0.0.0</code>‚Äîa simple mistake could exponentially increase deployment time. The whole point of this experiment was high-velocity development and shipping fast. Instead, I was spending more time fighting the borrow checker than writing business logic.
And at the end of the day, all of that would be fine if the build times and deployment did not get exacerbated by being slowed down if I wanted to push a new Docker Image to github, and build it remotely through ci/cd.</p><h2 id=i-just-wanted-to-be-louis-armstrong>I Just Wanted to Be Louis Armstrong</h2><p>Here&rsquo;s the thing: I wanted to improvise, jam out features, and iterate quickly. I didn&rsquo;t necessarily want to write the most correct code. I wanted to mess up and see what did not work. I wanted to learn from those mistakes.
Rust is incredible at what it does, but what it does well (memory safety, performance, correctness) wasn&rsquo;t solving my problem (development velocity for web apps). Really it was hindering me. I needed something that let me play jazz, not death metal. Something that prioritized iteration speed over compile-time guarantees. Something where changing a struct field didn&rsquo;t require an hour-long archaeological dig through the type system.
So I decided to go back to the drawing board and really take a look at my options.
To do this, I thought, well why not Go?
Go holds a special place in my heart, it&rsquo;s a language that prided itself for simplicity.
Especially when you are developing a web app.
So my goal was to create a web app, but I decided to do something that in hindsight was risky given the amount of time I wanted to spend developing.
Go famously does not have a &ldquo;ruby on rails&rdquo; equivalent.
So, since i made so many concesions at this point&mldr;
Why not write my own template/framework that I could reuse anytime.
I could make it <strong>EXACTLY</strong> how I wanted, I could make tailored to my needs, and make it so that I could just focus on being my own customer first.</p><h3 id=requirementstxt-electric-boogaloo>Requirements.txt: Electric Boogaloo</h3><ul><li>I want to be able to configure my server with a configuration file in a config directory that I could exclude from builds, but also be able to change environments based on deployments.</li><li>I want to be able to just pull down the parent repo, fork it or whatever and have auth, database access, caching, and S3 all ready for me to start developing on the actual business logic and hit the ground running.</li><li>I want to be able to have git repo functionality and have the CI/CD to deploy to the server and see the changes live. Like what was shown in the Dreams of Code video.</li><li>And anything else from the <a href=#requirementstxt>Requirements.txt</a> that wasn&rsquo;t covered here.</li></ul><h2 id=satisfying-my-needs>Satisfying My Needs</h2><p>First thing I decided to do was plan out the project structure to organize as I dumped out my garbage code:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ÔÑï .
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ ÔÑï cmd
</span></span><span class=line><span class=cl>‚îÇ  ‚îú‚îÄ‚îÄ ÔÑï configuration
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ Óóº config
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ ÔÑï controllers
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ ÔÑï db
</span></span><span class=line><span class=cl>‚îÇ  ‚îú‚îÄ‚îÄ ÔÑï migrations
</span></span><span class=line><span class=cl>‚îÇ  ‚îú‚îÄ‚îÄ ÔÑï queries
</span></span><span class=line><span class=cl>‚îÇ  ‚îî‚îÄ‚îÄ ÔÑï repository
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ Ôåà Dockerfile
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ ÔÑï docs
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ ÔÖõ go.mod
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ ÔÖõ go.sum
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ ÔÑï middlewares
</span></span><span class=line><span class=cl>‚îÇ  ‚îî‚îÄ‚îÄ ÔÑï configs
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ ÔÑï models
</span></span><span class=line><span class=cl>‚îÇ  ‚îú‚îÄ‚îÄ ÔÑï handlers
</span></span><span class=line><span class=cl>‚îÇ  ‚îú‚îÄ‚îÄ ÔÑï requests
</span></span><span class=line><span class=cl>‚îÇ  ‚îî‚îÄ‚îÄ ÔÑï responses
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ Óòã openapitools.json
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ Ôíä README.md
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ ÔÑï services
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ ÔíÅ sqlc.yml
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ ÔÑï tmp
</span></span><span class=line><span class=cl>‚îÇ  ‚îî‚îÄ‚îÄ ÔÄñ executable!
</span></span><span class=line><span class=cl>‚îî‚îÄ‚îÄ ÔÑï web
</span></span><span class=line><span class=cl>‚îî‚îÄ‚îÄ ÔÑï dist
</span></span><span class=line><span class=cl>‚îî‚îÄ‚îÄ ÔÑª index.html
</span></span></code></pre></div><p>The thought process for this was that I understand how pretty much any REST framework should be structured at this point, so just getting this laid out so that I can jump in with the knowledge of how the codebase actually is laid out makes it very easy for me to pinpoint where a bug is occurring intuitively.
This why there would always be a seperation of concerns.
It would be really easy to diagnose where something was going wrong by just looking at the structure and server logs.
Next, I wanted to create a structure where my configuration could live and ensure that I could hot-swap environments as I please. So I created a small web server using <a href=https://echo.labstack.com/>Echo</a> as a starting point. Here is what I started with:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Configuration</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Name</span>      <span class=kt>string</span> <span class=s>`yaml:&#34;name&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=nx>Semver</span>    <span class=kt>string</span> <span class=s>`yaml:&#34;semver&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=nx>License</span>   <span class=kt>string</span> <span class=s>`yaml:&#34;license&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=nx>Copyright</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>Year</span>   <span class=kt>int</span>    <span class=s>`yaml:&#34;year&#34;`</span>
</span></span><span class=line><span class=cl>        <span class=nx>Author</span> <span class=kt>string</span> <span class=s>`yaml:&#34;author&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=s>`yaml:&#34;copyright&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=nx>Server</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>JWT</span>      <span class=kt>string</span> <span class=s>`yaml:&#34;jwt&#34;`</span>
</span></span><span class=line><span class=cl>        <span class=nx>Port</span>     <span class=kt>int</span>    <span class=s>`yaml:&#34;port&#34;`</span>
</span></span><span class=line><span class=cl>        <span class=nx>Frontend</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>Dir</span> <span class=kt>string</span> <span class=s>`yaml:&#34;dir&#34;`</span>
</span></span><span class=line><span class=cl>            <span class=nx>Api</span> <span class=kt>string</span> <span class=s>`yaml:&#34;api&#34;`</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=s>`yaml:&#34;frontend&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=s>`yaml:&#34;server&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=nx>Database</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>URL</span>       <span class=kt>string</span> <span class=s>`yaml:&#34;url&#34;`</span>
</span></span><span class=line><span class=cl>        <span class=nx>Sqlc</span>      <span class=kt>string</span> <span class=s>`yaml:&#34;sqlc&#34;`</span>
</span></span><span class=line><span class=cl>        <span class=nx>Migration</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>Protocol</span>    <span class=kt>string</span> <span class=s>`yaml:&#34;protocol&#34;`</span>
</span></span><span class=line><span class=cl>            <span class=nx>Destination</span> <span class=kt>string</span> <span class=s>`yaml:&#34;destination&#34;`</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=s>`yaml:&#34;migration&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=s>`yaml:&#34;database&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=nx>Cache</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>URL</span> <span class=kt>string</span> <span class=s>`yaml:&#34;url&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=s>`yaml:&#34;cache&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=nx>S3</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>URL</span>    <span class=kt>string</span> <span class=s>`yaml:&#34;url&#34;`</span>
</span></span><span class=line><span class=cl>        <span class=nx>Access</span> <span class=kt>string</span> <span class=s>`yaml:&#34;access&#34;`</span>
</span></span><span class=line><span class=cl>        <span class=nx>Secret</span> <span class=kt>string</span> <span class=s>`yaml:&#34;secret&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=s>`yaml:&#34;s3&#34;`</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>With that done, I could later create commands that could be called by other parts of the built executable. And change the behavior of the service through the configuration.
I then made an endpoint that would return the configuration I had created as a JSON response.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// curl http://localhost:5000/configuration | jq &#39;.&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;name&#39;</span><span class=o>:</span> <span class=s1>&#39;fullstack_app&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;semver&#39;</span><span class=o>:</span> <span class=s1>&#39;0.0.1&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;server&#39;</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;jwt&#39;</span><span class=o>:</span> <span class=s1>&#39;abc123&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;port&#39;</span><span class=o>:</span> <span class=mi>5000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;frontend&#39;</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;dir&#39;</span><span class=o>:</span> <span class=s1>&#39;frontend/dist&#39;</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;api&#39;</span><span class=o>:</span> <span class=s1>&#39;frontend/api&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;database&#39;</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;url&#39;</span><span class=o>:</span> <span class=s1>&#39;postgres://localhost:5432/default&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;sqlc&#39;</span><span class=o>:</span> <span class=s1>&#39;sql&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;migration&#39;</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;protocol&#39;</span><span class=o>:</span> <span class=s1>&#39;postgres&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;destination&#39;</span><span class=o>:</span> <span class=s1>&#39;internal/migrations&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;cache&#39;</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;url&#39;</span><span class=o>:</span> <span class=s1>&#39;redis://localhost:6379/0&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;s3&#39;</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;url&#39;</span><span class=o>:</span> <span class=s1>&#39;localhost:9000&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;access&#39;</span><span class=o>:</span> <span class=s1>&#39;abc123&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;secret&#39;</span><span class=o>:</span> <span class=s1>&#39;def456&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>With that done, I was able to confirm that my Go configuration could read from the config file and operate as it was supposed to. Now I could then implement a form of an ORM with SQLC and Goose to have dead simple database migrations and model generation from table definitions.
So after using the <a href=https://github.com/spf13/cobra>Cobra CLI</a> to create a command-line interface for my project, I was able to create a series of commands to develop a really nice tool for being able to do database migrations, bump versions of the server itself, and also generate Swagger documentation so I could quickly interact with my database, or use to do code gen for a javascript frontend really quickly.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Óòß v1.24.5 ‡•ê   go run main.go --help
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>*** Help Text
</span></span><span class=line><span class=cl>Serve the application.
</span></span><span class=line><span class=cl>The default environment used with this is development,
</span></span><span class=line><span class=cl>So configured the application is opend at 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>http://localhost:60000
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>This can be altered in the 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>host: 0.0.0.0
</span></span><span class=line><span class=cl>port: <span class=m>60000</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>section of the config file. use -e environment when 
</span></span><span class=line><span class=cl>calling this <span class=nb>command</span> to run serve using the configured 
</span></span><span class=line><span class=cl>values.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>*** Command 
</span></span><span class=line><span class=cl>**** Default 
</span></span><span class=line><span class=cl>--- bash
</span></span><span class=line><span class=cl>go build main.go -o mindscape
</span></span><span class=line><span class=cl>./mindscape 
</span></span><span class=line><span class=cl>---
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>**** with -e passed
</span></span><span class=line><span class=cl>If one had some configuration file really-sick-config.yaml
</span></span><span class=line><span class=cl>--- bash
</span></span><span class=line><span class=cl>go build main.go -o egg_app
</span></span><span class=line><span class=cl>./egg_app -e really-sick-config
</span></span><span class=line><span class=cl>---
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Usage:
</span></span><span class=line><span class=cl>mindscape <span class=o>[</span>flags<span class=o>]</span>
</span></span><span class=line><span class=cl>mindscape <span class=o>[</span>command<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Available Commands:
</span></span><span class=line><span class=cl>bump        Bumps the semantic version of the server
</span></span><span class=line><span class=cl>completion  Generate the autocompletion script <span class=k>for</span> the specified shell
</span></span><span class=line><span class=cl>db          Database interactions
</span></span><span class=line><span class=cl>down         This <span class=nb>command</span> uses goose to run down migrations in the <span class=sb>`</span>int
</span></span><span class=line><span class=cl>ernal/migrations<span class=sb>`</span> folder
</span></span><span class=line><span class=cl><span class=nb>help</span>        Help about any <span class=nb>command</span>
</span></span><span class=line><span class=cl>swag        A brief description of your <span class=nb>command</span>
</span></span><span class=line><span class=cl>version     Gets the semantic version of the server 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Flags:
</span></span><span class=line><span class=cl>-e, --environment string   Choose what environment that should be used 
</span></span><span class=line><span class=cl>when running. Default is development <span class=o>(</span>default <span class=s2>&#34;development&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>-h, --help                 <span class=nb>help</span> <span class=k>for</span> mindscape
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Use <span class=s2>&#34;mindscape [command] --help&#34;</span> <span class=k>for</span> more information about a command.
</span></span></code></pre></div><p>Now let me show you how I created a dependency injection pattern for my services, to interact with the with the databse.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=cm>/* Generated by egg v0.0.1 */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>services</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;context&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;errors&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=s>&#34;github.com/adamkali/mindscape/db/repository&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;github.com/adamkali/mindscape/models/requests&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;github.com/google/uuid&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;github.com/jackc/pgx/v5/pgxpool&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;golang.org/x/crypto/bcrypt&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>hashPassword</span><span class=p>(</span><span class=nx>password</span> <span class=kt>string</span><span class=p>)</span> <span class=p>(</span><span class=kt>string</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>hashedPassword</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>bcrypt</span><span class=p>.</span><span class=nf>GenerateFromPassword</span><span class=p>([]</span><span class=nb>byte</span><span class=p>(</span><span class=nx>password</span><span class=p>),</span> <span class=mi>12</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=s>&#34;&#34;</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nb>string</span><span class=p>(</span><span class=nx>hashedPassword</span><span class=p>),</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>verifyPassword</span><span class=p>(</span><span class=nx>storedHash</span><span class=p>,</span> <span class=nx>providedPassword</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>err</span> <span class=o>:=</span> <span class=nx>bcrypt</span><span class=p>.</span><span class=nf>CompareHashAndPassword</span><span class=p>([]</span><span class=nb>byte</span><span class=p>(</span><span class=nx>storedHash</span><span class=p>),</span> <span class=p>[]</span><span class=nb>byte</span><span class=p>(</span><span class=nx>providedPassword</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>UserService</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>ctx</span>  <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span>
</span></span><span class=line><span class=cl>	<span class=nx>pool</span> <span class=o>*</span><span class=nx>pgxpool</span><span class=p>.</span><span class=nx>Pool</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Returns a refrence to a new UserService to be used in the controller</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>CreateUserService</span><span class=p>(</span><span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>,</span> <span class=nx>pool</span> <span class=o>*</span><span class=nx>pgxpool</span><span class=p>.</span><span class=nx>Pool</span><span class=p>)</span> <span class=o>*</span><span class=nx>UserService</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=o>&amp;</span><span class=nx>UserService</span><span class=p>{</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>pool</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Creates a new user</span>
</span></span><span class=line><span class=cl><span class=c1>//</span>
</span></span><span class=line><span class=cl><span class=c1>// params: *requests.NewUserRequest</span>
</span></span><span class=line><span class=cl><span class=c1>// returns: (*repository.User, error)</span>
</span></span><span class=line><span class=cl><span class=c1>//</span>
</span></span><span class=line><span class=cl><span class=c1>// This function takes a NewUserRequest object and returns a User object.</span>
</span></span><span class=line><span class=cl><span class=c1>// Both the username and email must be unique. If not an error is returned.</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>UserService</span> <span class=o>*</span><span class=nx>UserService</span><span class=p>)</span> <span class=nf>Create</span><span class=p>(</span><span class=nx>params</span> <span class=o>*</span><span class=nx>requests</span><span class=p>.</span><span class=nx>NewUserRequest</span><span class=p>)</span> <span class=p>(</span><span class=o>*</span><span class=nx>repository</span><span class=p>.</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>BCryptHash</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nf>hashPassword</span><span class=p>(</span><span class=nx>params</span><span class=p>.</span><span class=nx>Password</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>params</span><span class=p>.</span><span class=nx>IsAdmin</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=nx>UserService</span><span class=p>.</span><span class=nf>addNewUserAdmin</span><span class=p>(</span><span class=nx>repository</span><span class=p>.</span><span class=nx>CreateUserAdminParams</span><span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=nx>BCryptHash</span><span class=p>:</span> <span class=nx>BCryptHash</span><span class=p>,</span>
</span></span><span class=line><span class=cl>			<span class=nx>Username</span><span class=p>:</span>   <span class=nx>params</span><span class=p>.</span><span class=nx>Username</span><span class=p>,</span>
</span></span><span class=line><span class=cl>			<span class=nx>Email</span><span class=p>:</span>      <span class=nx>params</span><span class=p>.</span><span class=nx>Email</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=p>})</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=nx>UserService</span><span class=p>.</span><span class=nf>addNewUser</span><span class=p>(</span><span class=nx>repository</span><span class=p>.</span><span class=nx>CreateUserParams</span><span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=nx>BCryptHash</span><span class=p>:</span> <span class=nx>BCryptHash</span><span class=p>,</span>
</span></span><span class=line><span class=cl>			<span class=nx>Username</span><span class=p>:</span>   <span class=nx>params</span><span class=p>.</span><span class=nx>Username</span><span class=p>,</span>
</span></span><span class=line><span class=cl>			<span class=nx>Email</span><span class=p>:</span>      <span class=nx>params</span><span class=p>.</span><span class=nx>Email</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=p>})</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>UserService</span> <span class=o>*</span><span class=nx>UserService</span><span class=p>)</span> <span class=nf>addNewUser</span><span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=nx>params</span> <span class=nx>repository</span><span class=p>.</span><span class=nx>CreateUserParams</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>)</span> <span class=p>(</span><span class=o>*</span><span class=nx>repository</span><span class=p>.</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>user</span> <span class=nx>repository</span><span class=p>.</span><span class=nx>User</span>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Starting Connection&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nx>tx</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>UserService</span><span class=p>.</span><span class=nx>pool</span><span class=p>.</span><span class=nf>Begin</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>err</span><span class=p>.</span><span class=nf>Error</span><span class=p>())</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>defer</span> <span class=nx>tx</span><span class=p>.</span><span class=nf>Rollback</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nb>println</span><span class=p>(</span><span class=s>&#34;adding&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nx>repo</span> <span class=o>:=</span> <span class=nx>repository</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>tx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nx>user</span><span class=p>,</span> <span class=nx>err</span> <span class=p>=</span> <span class=nx>repo</span><span class=p>.</span><span class=nf>CreateUser</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>params</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>tx</span><span class=p>.</span><span class=nf>Commit</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>user</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=o>&amp;</span><span class=nx>user</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>UserService</span> <span class=o>*</span><span class=nx>UserService</span><span class=p>)</span> <span class=nf>addNewUserAdmin</span><span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=nx>params</span> <span class=nx>repository</span><span class=p>.</span><span class=nx>CreateUserAdminParams</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>)</span> <span class=p>(</span><span class=o>*</span><span class=nx>repository</span><span class=p>.</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>user</span> <span class=nx>repository</span><span class=p>.</span><span class=nx>User</span>
</span></span><span class=line><span class=cl>	<span class=nx>tx</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>UserService</span><span class=p>.</span><span class=nx>pool</span><span class=p>.</span><span class=nf>Begin</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>defer</span> <span class=nx>tx</span><span class=p>.</span><span class=nf>Rollback</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nx>repo</span> <span class=o>:=</span> <span class=nx>repository</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>tx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nx>user</span><span class=p>,</span> <span class=nx>err</span> <span class=p>=</span> <span class=nx>repo</span><span class=p>.</span><span class=nf>CreateUserAdmin</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>params</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>tx</span><span class=p>.</span><span class=nf>Commit</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=o>&amp;</span><span class=nx>user</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Login a user</span>
</span></span><span class=line><span class=cl><span class=c1>//</span>
</span></span><span class=line><span class=cl><span class=c1>// params: *requests.LoginRequest</span>
</span></span><span class=line><span class=cl><span class=c1>// returns: (*repository.User, error)</span>
</span></span><span class=line><span class=cl><span class=c1>//</span>
</span></span><span class=line><span class=cl><span class=c1>// This function takes a requests.LoginRequest object and returns a repository.User object.</span>
</span></span><span class=line><span class=cl><span class=c1>// This can be used with either a username or email address to log in a user.</span>
</span></span><span class=line><span class=cl><span class=c1>// </span>
</span></span><span class=line><span class=cl><span class=c1>// If the user is not found, an error is returned.</span>
</span></span><span class=line><span class=cl><span class=c1>// If the password is incorrect, an error is returned.</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>UserService</span> <span class=o>*</span><span class=nx>UserService</span><span class=p>)</span> <span class=nf>Login</span><span class=p>(</span><span class=nx>params</span> <span class=o>*</span><span class=nx>requests</span><span class=p>.</span><span class=nx>LoginRequest</span><span class=p>)</span> <span class=p>(</span><span class=o>*</span><span class=nx>repository</span><span class=p>.</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>user</span> <span class=nx>repository</span><span class=p>.</span><span class=nx>User</span>
</span></span><span class=line><span class=cl>	<span class=nx>tx</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>UserService</span><span class=p>.</span><span class=nx>pool</span><span class=p>.</span><span class=nf>Begin</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>defer</span> <span class=nx>tx</span><span class=p>.</span><span class=nf>Rollback</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>BCryptHash</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>	<span class=nx>repo</span> <span class=o>:=</span> <span class=nx>repository</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>tx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>params</span><span class=p>.</span><span class=nx>Email</span> <span class=o>!=</span> <span class=s>&#34;&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>BCryptHash</span><span class=p>,</span> <span class=nx>err</span> <span class=p>=</span> <span class=nx>repo</span><span class=p>.</span><span class=nf>FindBCryptHashByEmail</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>params</span><span class=p>.</span><span class=nx>Email</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>BCryptHash</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=nf>verifyPassword</span><span class=p>(</span><span class=nx>BCryptHash</span><span class=p>,</span> <span class=nx>params</span><span class=p>.</span><span class=nx>Password</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Verified&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=nx>user</span><span class=p>,</span> <span class=nx>err</span> <span class=p>=</span> <span class=nx>repo</span><span class=p>.</span><span class=nf>FindUserByEmail</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>params</span><span class=p>.</span><span class=nx>Email</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>			<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>user</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>errors</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=s>&#34;Could not verify password&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=nx>params</span><span class=p>.</span><span class=nx>Username</span> <span class=o>!=</span> <span class=s>&#34;&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>BCryptHash</span><span class=p>,</span> <span class=nx>err</span> <span class=p>=</span> <span class=nx>repo</span><span class=p>.</span><span class=nf>FindBCryptHashByUsername</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>params</span><span class=p>.</span><span class=nx>Username</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=nf>verifyPassword</span><span class=p>(</span><span class=nx>BCryptHash</span><span class=p>,</span> <span class=nx>params</span><span class=p>.</span><span class=nx>Password</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=nx>user</span><span class=p>,</span> <span class=nx>err</span> <span class=p>=</span> <span class=nx>repo</span><span class=p>.</span><span class=nf>FindUserByUsername</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>params</span><span class=p>.</span><span class=nx>Username</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>errors</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=s>&#34;Could not verify password&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>tx</span><span class=p>.</span><span class=nf>Commit</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=o>&amp;</span><span class=nx>user</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Removes a user by id</span>
</span></span><span class=line><span class=cl><span class=c1>//</span>
</span></span><span class=line><span class=cl><span class=c1>// params: uuid.UUID</span>
</span></span><span class=line><span class=cl><span class=c1>// returns: error</span>
</span></span><span class=line><span class=cl><span class=c1>//</span>
</span></span><span class=line><span class=cl><span class=c1>// This function takes a uuid.UUID object and returns an error if the user does not exist.</span>
</span></span><span class=line><span class=cl><span class=c1>// </span>
</span></span><span class=line><span class=cl><span class=c1>// If the user does not exist, an error is returned.</span>
</span></span><span class=line><span class=cl><span class=c1>// If the user is not deleted, an error is returned.</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>UserService</span> <span class=o>*</span><span class=nx>UserService</span><span class=p>)</span> <span class=nf>Remove</span><span class=p>(</span><span class=nx>user_id</span> <span class=nx>uuid</span><span class=p>.</span><span class=nx>UUID</span><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>tx</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>UserService</span><span class=p>.</span><span class=nx>pool</span><span class=p>.</span><span class=nf>Begin</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>defer</span> <span class=nx>tx</span><span class=p>.</span><span class=nf>Rollback</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nx>repo</span> <span class=o>:=</span> <span class=nx>repository</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>tx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>repo</span><span class=p>.</span><span class=nf>DeleteUserByID</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>user_id</span><span class=p>);</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>tx</span><span class=p>.</span><span class=nf>Commit</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Get a user by id</span>
</span></span><span class=line><span class=cl><span class=c1>//</span>
</span></span><span class=line><span class=cl><span class=c1>// params: uuid.UUID</span>
</span></span><span class=line><span class=cl><span class=c1>// returns: (*repository.User, error)</span>
</span></span><span class=line><span class=cl><span class=c1>//</span>
</span></span><span class=line><span class=cl><span class=c1>// This function takes a uuid.UUID object and returns a repository.User object.</span>
</span></span><span class=line><span class=cl><span class=c1>// If the user does not exist, an error is returned.</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>UserService</span> <span class=o>*</span><span class=nx>UserService</span><span class=p>)</span> <span class=nf>Get</span><span class=p>(</span><span class=nx>user_id</span> <span class=nx>uuid</span><span class=p>.</span><span class=nx>UUID</span><span class=p>)</span> <span class=p>(</span><span class=o>*</span><span class=nx>repository</span><span class=p>.</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>tx</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>UserService</span><span class=p>.</span><span class=nx>pool</span><span class=p>.</span><span class=nf>Begin</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>defer</span> <span class=nx>tx</span><span class=p>.</span><span class=nf>Rollback</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>user</span> <span class=nx>repository</span><span class=p>.</span><span class=nx>User</span>
</span></span><span class=line><span class=cl>	<span class=nx>repo</span> <span class=o>:=</span> <span class=nx>repository</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>tx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>user</span><span class=p>,</span> <span class=nx>err</span> <span class=p>=</span> <span class=nx>repo</span><span class=p>.</span><span class=nf>FindUserByID</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>user_id</span><span class=p>);</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>tx</span><span class=p>.</span><span class=nf>Commit</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=o>&amp;</span><span class=nx>user</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Get all users</span>
</span></span><span class=line><span class=cl><span class=c1>//</span>
</span></span><span class=line><span class=cl><span class=c1>// returns: ([]repository.User, error)</span>
</span></span><span class=line><span class=cl><span class=c1>//</span>
</span></span><span class=line><span class=cl><span class=c1>// This function returns a slice of repository.User objects.</span>
</span></span><span class=line><span class=cl><span class=c1>// If there are no users, an error is returned.</span>
</span></span><span class=line><span class=cl><span class=c1>//</span>
</span></span><span class=line><span class=cl><span class=c1>// If there is an error on the database side, an error is returned.</span>
</span></span><span class=line><span class=cl><span class=c1>// </span>
</span></span><span class=line><span class=cl><span class=c1>// [WARN] Should only be used for debugging.</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>UserService</span> <span class=o>*</span><span class=nx>UserService</span><span class=p>)</span> <span class=nf>GetAll</span><span class=p>()</span> <span class=p>([]</span><span class=nx>repository</span><span class=p>.</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>tx</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>UserService</span><span class=p>.</span><span class=nx>pool</span><span class=p>.</span><span class=nf>Begin</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>defer</span> <span class=nx>tx</span><span class=p>.</span><span class=nf>Rollback</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>users</span> <span class=p>[]</span><span class=nx>repository</span><span class=p>.</span><span class=nx>User</span>
</span></span><span class=line><span class=cl>	<span class=nx>repo</span> <span class=o>:=</span> <span class=nx>repository</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>tx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>users</span><span class=p>,</span> <span class=nx>err</span> <span class=p>=</span> <span class=nx>repo</span><span class=p>.</span><span class=nf>FindUsers</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>);</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>tx</span><span class=p>.</span><span class=nf>Commit</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>users</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Update a user by id</span>
</span></span><span class=line><span class=cl><span class=c1>//</span>
</span></span><span class=line><span class=cl><span class=c1>// params:</span>
</span></span><span class=line><span class=cl><span class=c1>//    user_id: uuid.UUID,</span>
</span></span><span class=line><span class=cl><span class=c1>//    profile_name: string</span>
</span></span><span class=line><span class=cl><span class=c1>// returns: (*repository.User, error)</span>
</span></span><span class=line><span class=cl><span class=c1>//</span>
</span></span><span class=line><span class=cl><span class=c1>// This function takes a uuid.UUID object and a string object and returns a repository.User object.</span>
</span></span><span class=line><span class=cl><span class=c1>// If the user does not exist, an error is returned.</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>UserService</span> <span class=o>*</span><span class=nx>UserService</span><span class=p>)</span> <span class=nf>Update</span><span class=p>(</span><span class=nx>user_id</span> <span class=nx>uuid</span><span class=p>.</span><span class=nx>UUID</span><span class=p>,</span> <span class=nx>profile_name</span> <span class=kt>string</span><span class=p>)</span> <span class=p>(</span><span class=o>*</span><span class=nx>repository</span><span class=p>.</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>tx</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>UserService</span><span class=p>.</span><span class=nx>pool</span><span class=p>.</span><span class=nf>Begin</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>defer</span> <span class=nx>tx</span><span class=p>.</span><span class=nf>Rollback</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nx>repo</span> <span class=o>:=</span> <span class=nx>repository</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>tx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>user</span> <span class=nx>repository</span><span class=p>.</span><span class=nx>User</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=p>=</span> <span class=nx>repo</span><span class=p>.</span><span class=nf>UpdateUserProfile</span><span class=p>(</span>
</span></span><span class=line><span class=cl>		<span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=nx>repository</span><span class=p>.</span><span class=nx>UpdateUserProfileParams</span><span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=nx>ProfilePicUrl</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>profile_name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>			<span class=nx>ID</span><span class=p>:</span>            <span class=nx>user_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=p>},</span>
</span></span><span class=line><span class=cl>	<span class=p>);</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>user</span><span class=p>,</span> <span class=nx>err</span> <span class=p>=</span> <span class=nx>repo</span><span class=p>.</span><span class=nf>FindUserByID</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>user_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>tx</span><span class=p>.</span><span class=nf>Commit</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=o>&amp;</span><span class=nx>user</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// UpdateUserCredentials</span>
</span></span><span class=line><span class=cl><span class=c1>// params: *repository.UpdateUserCredentialsParams</span>
</span></span><span class=line><span class=cl><span class=c1>// returns: (*repository.User, error)</span>
</span></span><span class=line><span class=cl><span class=c1>//</span>
</span></span><span class=line><span class=cl><span class=c1>// This function takes a UpdateUserCredentialsParams object and returns a User object.</span>
</span></span><span class=line><span class=cl><span class=c1>// If the user does not exist, an error is returned.</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>UserService</span> <span class=o>*</span><span class=nx>UserService</span><span class=p>)</span> <span class=nf>UpdateUserCredentials</span><span class=p>(</span><span class=nx>params</span> <span class=o>*</span><span class=nx>requests</span><span class=p>.</span><span class=nx>UpdateCredentialsRequest</span><span class=p>)</span> <span class=p>(</span><span class=o>*</span><span class=nx>repository</span><span class=p>.</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>tx</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>UserService</span><span class=p>.</span><span class=nx>pool</span><span class=p>.</span><span class=nf>Begin</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>defer</span> <span class=nx>tx</span><span class=p>.</span><span class=nf>Rollback</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nx>repo</span> <span class=o>:=</span> <span class=nx>repository</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>tx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>user</span> <span class=nx>repository</span><span class=p>.</span><span class=nx>User</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nx>user</span><span class=p>,</span> <span class=nx>err</span> <span class=p>=</span> <span class=nx>repo</span><span class=p>.</span><span class=nf>FindUserByID</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>params</span><span class=p>.</span><span class=nx>ID</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nx>updateParams</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>params</span><span class=p>.</span><span class=nf>Into</span><span class=p>(</span><span class=nx>hashPassword</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=c1>// if OldPassword is empty then we do not need to update the password</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>params</span><span class=p>.</span><span class=nx>OldPassword</span> <span class=o>==</span> <span class=s>&#34;&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>updateParams</span><span class=p>.</span><span class=nx>BCryptHash</span> <span class=p>=</span> <span class=nx>user</span><span class=p>.</span><span class=nx>BCryptHash</span>
</span></span><span class=line><span class=cl>		<span class=nx>updateParams</span><span class=p>.</span><span class=nx>BCryptHash_2</span> <span class=p>=</span> <span class=nx>user</span><span class=p>.</span><span class=nx>BCryptHash</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=nf>verifyPassword</span><span class=p>(</span><span class=nx>user</span><span class=p>.</span><span class=nx>BCryptHash</span><span class=p>,</span> <span class=nx>params</span><span class=p>.</span><span class=nx>OldPassword</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>updateParams</span><span class=p>.</span><span class=nx>BCryptHash_2</span> <span class=p>=</span> <span class=nx>user</span><span class=p>.</span><span class=nx>BCryptHash</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=p>=</span> <span class=nx>repo</span><span class=p>.</span><span class=nf>UpdateUserCredentials</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>updateParams</span><span class=p>);</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=c1>// at this point we can assume that the user was updated, so now lets the </span>
</span></span><span class=line><span class=cl>	<span class=c1>// update the user inplace</span>
</span></span><span class=line><span class=cl>	<span class=nx>user</span><span class=p>.</span><span class=nx>BCryptHash</span> <span class=p>=</span> <span class=nx>updateParams</span><span class=p>.</span><span class=nx>BCryptHash</span>
</span></span><span class=line><span class=cl>	<span class=nx>user</span><span class=p>.</span><span class=nx>Email</span> <span class=p>=</span> <span class=nx>updateParams</span><span class=p>.</span><span class=nx>Email</span>
</span></span><span class=line><span class=cl>	<span class=nx>user</span><span class=p>.</span><span class=nx>Username</span> <span class=p>=</span> <span class=nx>updateParams</span><span class=p>.</span><span class=nx>Username</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nx>tx</span><span class=p>.</span><span class=nf>Commit</span><span class=p>(</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=o>&amp;</span><span class=nx>user</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Why would I want to do this. Well, let me explain.
First of all, I really only needed to implement the interface that the UserService implemented in order to register it. This meant that I could realistically switch out the pgx pakage with turso, with neon, with any database provider in the future.
It also meant when I realized later that if someone pointed out that I was doing something completely wrong, the problem could be isolated to the service.
I could change it and the rest of the application would not notice.
So using this design pattern allowed me to do that.
I created a new file called <code>controller.go</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Registrar</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Config</span>           <span class=o>*</span><span class=nx>configuration</span><span class=p>.</span><span class=nx>Configuration</span>
</span></span><span class=line><span class=cl>    <span class=nx>ValidatorService</span> <span class=o>*</span><span class=nx>services</span><span class=p>.</span><span class=nx>ValidatorService</span>
</span></span><span class=line><span class=cl>    <span class=nx>UserService</span>      <span class=nx>services</span><span class=p>.</span><span class=nx>IUserService</span>
</span></span><span class=line><span class=cl>    <span class=nx>AuthService</span>      <span class=nx>services</span><span class=p>.</span><span class=nx>IAuthService</span>
</span></span><span class=line><span class=cl>    <span class=nx>MinioService</span>     <span class=nx>services</span><span class=p>.</span><span class=nx>IMinioService</span>
</span></span><span class=line><span class=cl>    <span class=nx>RedisService</span>     <span class=nx>services</span><span class=p>.</span><span class=nx>IRedisService</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>IController</span> <span class=kd>interface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>Attatch</span><span class=p>(</span><span class=nx>e</span> <span class=o>*</span><span class=nx>echo</span><span class=p>.</span><span class=nx>Echo</span><span class=p>,</span> <span class=nx>authMiddleware</span> <span class=nx>echo</span><span class=p>.</span><span class=nx>MiddlewareFunc</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>createControllerParams</span><span class=p>(</span><span class=nx>config</span> <span class=o>*</span><span class=nx>configuration</span><span class=p>.</span><span class=nx>Configuration</span><span class=p>)</span> <span class=p>(</span><span class=o>*</span><span class=nx>Registrar</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>ctx</span> <span class=o>:=</span> <span class=nx>context</span><span class=p>.</span><span class=nf>Background</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>db</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>pgxpool</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>config</span><span class=p>.</span><span class=nx>Database</span><span class=p>.</span><span class=nx>URL</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=o>&amp;</span><span class=nx>Registrar</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>Config</span><span class=p>:</span>           <span class=nx>config</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>ValidatorService</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>services</span><span class=p>.</span><span class=nx>ValidatorService</span><span class=p>{},</span>
</span></span><span class=line><span class=cl>        <span class=nx>AuthService</span><span class=p>:</span>      <span class=nx>services</span><span class=p>.</span><span class=nf>CreateAuthService</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>db</span><span class=p>,</span> <span class=nx>config</span><span class=p>),</span> <span class=c1>// here I register</span>
</span></span><span class=line><span class=cl>        <span class=nx>UserService</span><span class=p>:</span>      <span class=nx>services</span><span class=p>.</span><span class=nf>CreateUserService</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>db</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=nx>MinioService</span><span class=p>:</span>     <span class=nx>services</span><span class=p>.</span><span class=nf>CreateMinioService</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>config</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=nx>RedisService</span><span class=p>:</span>     <span class=nx>services</span><span class=p>.</span><span class=nf>CreateRedisService</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>config</span><span class=p>),</span>
</span></span><span class=line><span class=cl>     <span class=p>},</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Now I have an extremely flexible interface for being able to register whatever services I need along with a way to register controllers as well:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>AttatchControllers</span><span class=p>(</span><span class=nx>e</span> <span class=o>*</span><span class=nx>echo</span><span class=p>.</span><span class=nx>Echo</span><span class=p>,</span> <span class=nx>config</span> <span class=o>*</span><span class=nx>configuration</span><span class=p>.</span><span class=nx>Configuration</span><span class=p>,</span> <span class=nx>conts</span> <span class=o>...</span><span class=nx>IController</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// configure middlewares here right now it is just an authentication</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>v</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>conts</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>v</span><span class=p>.</span><span class=nf>Attatch</span><span class=p>(</span><span class=nx>e</span><span class=p>,</span> <span class=nx>echojwt</span><span class=p>.</span><span class=nf>WithConfig</span><span class=p>(</span><span class=nx>configs</span><span class=p>.</span><span class=nf>AuthMiddlewareConfig</span><span class=p>(</span><span class=nx>config</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Where all I really need to do in order to create a new controller is implement the Attach function for the controller. Here is how I implemented it for my user_controller:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// ./controllers/user_controller.go</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>BuildUserController</span><span class=p>(</span><span class=nx>p</span> <span class=o>*</span><span class=nx>Registrar</span><span class=p>)</span> <span class=nx>UserController</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>UserController</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>Name</span><span class=p>:</span>             <span class=s>&#34;/users&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>Config</span><span class=p>:</span>           <span class=nx>p</span><span class=p>.</span><span class=nx>Config</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>AuthService</span><span class=p>:</span>      <span class=nx>p</span><span class=p>.</span><span class=nx>AuthService</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>MinioService</span><span class=p>:</span>     <span class=nx>p</span><span class=p>.</span><span class=nx>MinioService</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>UserService</span><span class=p>:</span>      <span class=nx>p</span><span class=p>.</span><span class=nx>UserService</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>RedisService</span><span class=p>:</span>     <span class=nx>p</span><span class=p>.</span><span class=nx>RedisService</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>ValidatorService</span><span class=p>:</span> <span class=nx>p</span><span class=p>.</span><span class=nx>ValidatorService</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>// ./controllers/routes.go</span>
</span></span><span class=line><span class=cl><span class=nf>AttatchControllers</span><span class=p>(</span><span class=nx>e</span><span class=p>,</span> <span class=nx>config</span><span class=p>,</span> <span class=nf>BuildUserController</span><span class=p>(</span><span class=nx>params</span><span class=p>))</span>
</span></span></code></pre></div><p>Now that I have accomplished this, it is now extremely easy to add whatever service to the server as needed.
An added benifit is that I would be able to change this implementation details of this registration, and the rest of the application would not be affected. See the pattern?</p><p>Now that I have an easy way to build a web server, I added in some CI/CD and confirmed that GitHub would pick up the server, build the Docker container, and then deploy it to GitLab.
Which pretty much leaves me with job complete.
But that is not the end of the story. Because if I already had all of this composability.
I could see all the parts of the application that could be swapped out.
I could see all the parts of the project that was just a template that had strings that I could swap out&mldr;
I am already making this into a &ldquo;template&rdquo; app along with the rest of the tech stack as well&mldr;, so why not make a full-fledged framework for myself?</p><h1 id=egg>Egg</h1><p>Introducing my own backend framework for Go: <a href=https://github.com/adamkali/egg_cli.git>egg</a>. But this isn&rsquo;t just another &ldquo;opinionated framework&rdquo;. It is a CLI that embodies my philosophy of convention over configuration.</p><p>Here&rsquo;s what I actually built: a Cobra-based CLI with a Bubbletea TUI wizard that generates complete Go web applications from 40+ embedded templates. When you run <code>egg_cli init</code>, you get a beautiful interactive terminal interface that walks you through project setup‚Äîdatabase choice, authentication, frontend framework, the works. It&rsquo;s like having a conversation with your computer about what you want to build.</p><p>The magic happens through a pluggable module system with seven different modules (<code>egg::initialize</code>, <code>egg::bootstrap_directories</code>, <code>egg::generate_configuration</code>, etc.) that handle everything from directory structure to CI/CD pipeline generation. Each module implements the <code>IModule</code> interface, making the whole system extensible and testable.</p><p>Convention over configuration taken to its logical extreme. Instead of spending hours setting up the same boilerplate every time I have a brilliant 11 PM idea, I run one command and get a complete project with:</p><ul><li><p>REST API controllers with Echo routing</p></li><li><p>Type-safe database queries with SQLC</p></li><li><p>Database migrations with Goose</p></li><li><p>JWT authentication services with interfaces for easy testing</p></li><li><p>Redis caching integration</p></li><li><p>S3/MinIO storage services</p></li><li><p>Docker setup for deployment</p></li><li><p>Swagger documentation generation</p></li><li><p>Complete CI/CD pipeline for GitHub Actions</p><p>And it&rsquo;s not just generation‚Äîthe CLI includes development utilities too. Need to convert your config to a <code>.env</code> file? <code>egg_cli generate dotenv</code>. Want to generate config from environment variables? <code>egg_cli env</code>. Need to bump versions? The generated project includes its own CLI with database migration commands, version management, and Swagger generation.</p></li></ul><h2 id=what-really-made-me-happy>What Really Made Me Happy</h2><p>The velocity is intoxicating. I can go from idea to working API with authentication, database, and deployment pipeline in under 10 minutes. When I built my current project Mindscape using Egg, the development experience was exactly what I wanted: I spent my time on business logic, not fighting with boilerplate.
And sure even if I bounced off a project. I did not have to reinvent the wheel, again. I made the wheel.
Just put it on a different wagon.
The framework generated a clean project structure that followed my mental model from .NET development‚Äîservices with interfaces, proper dependency injection, organized controllers‚Äîbut in Go&rsquo;s fast, simple ecosystem. When I needed to add a new feature, I wasn&rsquo;t hunting through documentation or trying to remember how I set up JWT middleware last time.
I did not need to fight the language to get something working.
I just needed to run <code>egg_cli init</code> and answer a few questions, or <code>egg_cli generate</code> to get what I needed.
It was already there, already working, already tested.
Want to swap Auth0 or AWS Cognito? Just implement the <code>IAuthService</code> interface and update the dependency injection. Want to add a new storage provider? Implement <code>IMinioService</code> and plug it in. The interfaces make everything swappable without touching the business logic.
I could change how anything works as I found better solutions and as long as the wires were still conneted.
I was mint.
Every Egg project comes with its own command-line tool for database migrations (<code>go run main.go db migrate</code>), version bumping (<code>go run main.go bump minor</code>), and Swagger doc generation (<code>go run main.go swag</code>). No more googling &ldquo;how do I run migrations in this project&rdquo;‚Äîit&rsquo;s all right there in the help text. All right there in a way i was familiar with.
I could even just do all of that with a Makefile if I did not want to use the CLI.</p><h1 id=conclusion>Conclusion</h1><p>At the end of this nearly year-long journey, I&rsquo;m genuinely proud of what I built. Not because Egg is revolutionary‚Äîit&rsquo;s not. But because I actually finished a personal project that solves my specific problems, and I&rsquo;m using it every day for real work.</p><p>The learning was deeper than I expected. Building dependency injection from scratch in Go gave me an intimate understanding of the pattern that transcends any single language. Now when I look at .NET&rsquo;s DI container at work, or Spring&rsquo;s in Java, or any other framework&rsquo;s approach, I understand not just <strong>what</strong> they&rsquo;re doing but <strong>why</strong> they made those specific design decisions. There&rsquo;s something powerful about implementing a concept yourself that no amount of documentation can teach you.</p><p>But what makes me happiest is this: I built something for myself, exactly how I wanted it to work. When I start my next project‚Äîa bookmark manager/homepage/dashboard for home servers‚ÄîI won&rsquo;t spend a weekend setting up auth and database connections and Docker configs. I&rsquo;ll run <code>egg_cli init</code>, answer some questions in a nice TUI, and be writing business logic in 10 minutes.</p><p>That&rsquo;s the real victory. Not building the next Rails or Django, but building the tool that lets me ship ideas faster. Sometimes reinventing the wheel is exactly the right choice, especially when you need a wheel that fits your cart perfectly.
I did it.
I did not need to shoe horn myself into a new way of thinking.</p><h2 id=should-you-use-egg>Should You Use Egg?</h2><p>Probably not, and that&rsquo;s perfectly fine. Egg was built to solve my specific workflow problems and embody my preferences about how web development should feel. Sure It probably isn&rsquo;t the best for you. And that&rsquo;s ok.</p><p>Infact, don&rsquo;t use it. I am not your dad! I encourage you to make your own and make fun of me on my repo for it. Just do it yourself. Learn to reinvent the wheel so you can understand why people are doing the things that they do. I used to think that any sort of Interfaces are bad. Now I know that C# and Java interfaces are bad.</p><p>But, seriously. Take the time to build something. Not just the next netflix. Not just the next whatever. Build something for you. Take a look at the two most recent configs I posted at the time of writing: <a href=/configs/glaze-me/>Glaze Me</a> and <a href=/configs/norbsidian/>Norbsidian</a>. They really aren&rsquo;t meant for anyone but myself, and thats the beauty of them! You will always be a customer for yourself. So make things for yourself.</p><p>But if you&rsquo;re tired of rewriting the same authentication boilerplate, if you want structure and organization, if you believe development velocity matters more than using the &ldquo;approved&rdquo; tools&mldr; then maybe we&rsquo;re kindred spirits. Give it a try, and if you like how I think about these problems, drop a star on the repo. You want to use it but you dont like how I did something: fork it and send a pull request. Because I am proud of my self.</p><h2 id=thanks-for-reading>Thanks for Reading</h2><p>I want to give a huge shout out:</p><ul><li>Sierra LaRosa the love of my life.</li><li>My parents for the support they have given me and Sierra.</li><li>eFileMadeEasy for all the resources i have had to learn from.</li><li>The immense amount of resources from the Golang community.<ul><li><a href=https://echo.labstack.com/>echo</a></li><li><a href=https://sqlc.dev/>sqlc</a></li><li><a href=https://github.com/jackc/pgx>pgx</a></li><li><a href=https://github.com/pressly/goose>goose</a></li></ul></li><li><a href=https://github.com/loco-rs/loco>loco-rs</a> for lots of the inspiration and motivation.</li><li><a href="https://www.youtube.com/watch?v=F-9KWQByeU0&amp;t=10s">Dreams Of Code</a> for the inspiration to make this project.</li><li>Andho from discord for allowing him to spam him in discord.</li><li><a href=https://github.com/BigJayToDaIzo>BigJay</a> for lots of moral support and allowing me to learn some Go tips from him.</li></ul><p>And before you go: I want to provide you with a quote that i heard, literally as I finished the project from <a href="https://www.youtube.com/watch?v=zikJTpJgzzo">A typecraft video interviewing DHH on Omarchy</a>:</p><blockquote><p>I have come to the conclusion that we have been going about [trying to get people to use linux] a bit of the back way.
I can feel the excitement that there is for hyprland and Arch. And it is a different kind of exicement&mldr;
Commit to being earnest about liking computers.
And if you like computers, commit to being earnest about learning about computers, learn new things about computers, running new operating systems on them.</p></blockquote><p>What I will only add to that is that is what I want you to take away from this project.
Be authentic about your excitement.
And be earnest that you learned something.
Build something for yourself.</p><p>See you around!
Adam Kalinowski</p></article><div class=row><div class=col-md><a href=https://blog.kalilarosa.xyz/posts/neorg-is-changing-the-way-i-think/><span>previous: </span><span>Neorg Is Changing The Way that I Think</span></a></div><div class="col-md text-md-end"></div></div></div></div><footer><div class=bg-slate-900><p class=text-lg></p></div></footer></main><script src=https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js></script><script src=/synthwave-shader.js></script></body></html>